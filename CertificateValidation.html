<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Configuring Certificate Validation &mdash; ssl-config documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="ssl-config documentation" href="index.html" />
    <link rel="next" title="Example Configurations" href="ExampleSSLConfig.html" />
    <link rel="prev" title="Hostname Verification" href="HostnameVerification.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#configuring-certificate-validation" id="id1">Configuring Certificate Validation</a><ul>
<li><a class="reference internal" href="#disabling-certificates-with-weak-signature-algorithms" id="id2">Disabling Certificates with Weak Signature Algorithms</a></li>
<li><a class="reference internal" href="#disabling-certificates-with-weak-key-sizes" id="id3">Disabling Certificates With Weak Key Sizes</a></li>
<li><a class="reference internal" href="#disabling-weak-certificates-globally" id="id4">Disabling Weak Certificates Globally</a></li>
<li><a class="reference internal" href="#debugging-certificate-validation" id="id5">Debugging Certificate Validation</a></li>
<li><a class="reference internal" href="#further-reading" id="id6">Further Reading</a></li>
</ul>
</li>
</ul>
</div>
<!--- Copyright (C) 2009-2015 Typesafe Inc. <http://www.typesafe.com> --><div class="section" id="configuring-certificate-validation">
<span id="certificatevalidation"></span><h1><a class="toc-backref" href="#id1">Configuring Certificate Validation</a><a class="headerlink" href="#configuring-certificate-validation" title="Permalink to this headline">¶</a></h1>
<p>In an SSL connection, the identity of the remote server is verified
using an X.509 certificate which has been signed by a certificate
authority.</p>
<p>The JSSE implementation of X.509 certificates is defined in the <a class="reference external" href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/certpath/CertPathProgGuide.html">PKI
Programmer&#8217;s
Guide</a>.</p>
<p>Some X.509 certificates that are used by servers are old, and are using
signatures that can be forged by an attacker. Because of this, it may
not be possible to verify the identity of the server if that signature
algorithm is being used. Fortunately, this is rare &#8211; over 95% of
trusted leaf certificates and 95% of trusted signing certificates use
<a class="reference external" href="http://csrc.nist.gov/publications/nistpubs/800-131A/sp800-131A.pdf">NIST recommended key
sizes</a>.</p>
<p>WS automatically disables weak signature algorithms and weak keys for
you, according to the <a class="reference external" href="http://sim.ivi.co/2012/04/nist-security-strength-time-frames.html">current
standards</a>.</p>
<p>This feature is similar to
<a class="reference external" href="http://sim.ivi.co/2013/11/harness-ssl-and-jsse-key-size-control.html">jdk.certpath.disabledAlgorithms</a>,
but is specific to the WS client and can be set dynamically, whereas
jdk.certpath.disabledAlgorithms is global across the JVM, must be set
via a security property, and is only available in JDK 1.7 and later.</p>
<p>You can override this to your tastes, but it is recommended to be at
least as strict as the defaults. The appropriate signature names can be
looked up in the <a class="reference external" href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html">Providers
Documentation</a>.</p>
<div class="section" id="disabling-certificates-with-weak-signature-algorithms">
<h2><a class="toc-backref" href="#id2">Disabling Certificates with Weak Signature Algorithms</a><a class="headerlink" href="#disabling-certificates-with-weak-signature-algorithms" title="Permalink to this headline">¶</a></h2>
<p>The default list of disabled signature algorithms is defined below:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ssl</span><span class="o">-</span><span class="n">config</span><span class="o">.</span><span class="n">ssl</span><span class="o">.</span><span class="n">disabledSignatureAlgorithms</span> <span class="o">=</span> <span class="s">&quot;MD2, MD4, MD5&quot;</span>
</pre></div>
</div>
<p>MD5 is disabled, based on the proven <a class="reference external" href="https://www.win.tue.nl/hashclash/rogue-ca/">collision
attack</a> and the Mozilla
recommendations:</p>
<blockquote>
<div><p>MD5 certificates may be compromised when attackers can create a fake
cert that hashes to the same value as one with a legitimate
signature, and is hence trusted. Mozilla can mitigate this potential
vulnerability by turning off support for MD5-based signatures. The
MD5 root certificates don&#8217;t necessarily need to be removed from NSS,
because the signatures of root certificates are not validated (roots
are self-signed). Disabling MD5 will impact intermediate and end
entity certificates, where the signatures are validated.</p>
<p>The relevant CAs have confirmed that they stopped issuing MD5
certificates. However, there are still many end entity certificates
that would be impacted if support for MD5-based signatures was
turned off in 2010. Therefore, we are hoping to give the affected
CAs time to react, and are proposing the date of June 30, 2011 for
turning off support for MD5-based signatures. The relevant CAs are
aware that Mozilla will turn off MD5 support earlier if needed.</p>
</div></blockquote>
<p>SHA-1 is considered weak, and new certificates should use digest
algorithms from the <a class="reference external" href="https://en.wikipedia.org/wiki/SHA-2">SHA-2
family</a>. However, old
certificates should still be considered valid.</p>
</div>
<div class="section" id="disabling-certificates-with-weak-key-sizes">
<h2><a class="toc-backref" href="#id3">Disabling Certificates With Weak Key Sizes</a><a class="headerlink" href="#disabling-certificates-with-weak-key-sizes" title="Permalink to this headline">¶</a></h2>
<p>WS defines the default list of weak key sizes as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ssl</span><span class="o">-</span><span class="n">config</span><span class="o">.</span><span class="n">ssl</span><span class="o">.</span><span class="n">disabledKeyAlgorithms</span> <span class="o">=</span> <span class="s">&quot;DHE keySize &lt; 2048, ECDH keySize &lt; 2048, ECDHE keySize &lt; 2048, RSA keySize &lt; 2048, DSA keySize &lt; 2048, EC keySize &lt; 224&quot;</span>
</pre></div>
</div>
<p>These settings are based in part on
<a class="reference external" href="http://www.keylength.com/">keylength.com</a>, and in part on the
Mozilla recommendations:</p>
<blockquote>
<div><p>The NIST recommendation is to discontinue 1024-bit RSA certificates
by December 31, 2010. Therefore, CAs have been advised that they
should not sign any more certificates under their 1024-bit roots by
the end of this year.</p>
<p>The date for disabling/removing 1024-bit root certificates will be
dependent on the state of the art in public key cryptography, but
under no circumstances should any party expect continued support for
this modulus size past December 31, 2013. As mentioned above, this
date could get moved up substantially if new attacks are discovered.
We recommend all parties involved in secure transactions on the web
move away from 1024-bit moduli as soon as possible.</p>
</div></blockquote>
<p><strong>NOTE:</strong> because weak key sizes also apply to root certificates (which
is not included in the certificate chain available to the PKIX certpath
checker included in JSSE), setting this option will check the accepted
issuers in any configured trustmanagers and keymanagers, including the
default.</p>
<p>Over 95% of trusted leaf certificates and 95% of trusted signing
certificates use <a class="reference external" href="http://csrc.nist.gov/publications/nistpubs/800-131A/sp800-131A.pdf">NIST recommended key
sizes</a>,
so this is considered a safe default.</p>
</div>
<div class="section" id="disabling-weak-certificates-globally">
<h2><a class="toc-backref" href="#id4">Disabling Weak Certificates Globally</a><a class="headerlink" href="#disabling-weak-certificates-globally" title="Permalink to this headline">¶</a></h2>
<p>To disable signature algorithms and weak key sizes globally across the
JVM, use the <tt class="docutils literal"><span class="pre">jdk.certpath.disabledAlgorithms</span></tt> <a class="reference external" href="http://sim.ivi.co/2011/07/java-se-7-release-security-enhancements.html">security
property</a>.
Setting security properties is covered in more depth in <a class="reference internal" href="CipherSuites.html#ciphersuites"><em>Configuring Cipher Suites</em></a> section.</p>
<blockquote>
<div><strong>NOTE</strong> if configured, the <tt class="docutils literal"><span class="pre">jdk.certpath.disabledAlgorithms</span></tt>
property should contain the settings from both
<tt class="docutils literal"><span class="pre">disabledKeyAlgorithms</span></tt> and <tt class="docutils literal"><span class="pre">disabledSignatureAlgorithms</span></tt>.</div></blockquote>
</div>
<div class="section" id="debugging-certificate-validation">
<h2><a class="toc-backref" href="#id5">Debugging Certificate Validation</a><a class="headerlink" href="#debugging-certificate-validation" title="Permalink to this headline">¶</a></h2>
<p>To see more details on certificate validation, set the following debug
configuration:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ssl</span><span class="o">-</span><span class="n">config</span><span class="o">.</span><span class="n">ssl</span><span class="o">.</span><span class="n">debug</span><span class="o">.</span><span class="n">certpath</span> <span class="o">=</span> <span class="n">true</span>
</pre></div>
</div>
<p>The undocumented setting <tt class="docutils literal"><span class="pre">-Djava.security.debug=x509</span></tt> may also be
helpful.</p>
</div>
<div class="section" id="further-reading">
<h2><a class="toc-backref" href="#id6">Further Reading</a><a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://wiki.mozilla.org/CA:MD5and1024">Dates for Phasing out MD5-based signatures and 1024-bit
moduli</a></li>
<li><a class="reference external" href="https://tersesystems.com/2014/03/20/fixing-x509-certificates/">Fixing X.509
Certificates</a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Configuring Certificate Validation</a><ul>
<li><a class="reference internal" href="#disabling-certificates-with-weak-signature-algorithms">Disabling Certificates with Weak Signature Algorithms</a></li>
<li><a class="reference internal" href="#disabling-certificates-with-weak-key-sizes">Disabling Certificates With Weak Key Sizes</a></li>
<li><a class="reference internal" href="#disabling-weak-certificates-globally">Disabling Weak Certificates Globally</a></li>
<li><a class="reference internal" href="#debugging-certificate-validation">Debugging Certificate Validation</a></li>
<li><a class="reference internal" href="#further-reading">Further Reading</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="HostnameVerification.html" title="previous chapter">Hostname Verification</a></li>
      <li>Next: <a href="ExampleSSLConfig.html" title="next chapter">Example Configurations</a></li>
  </ul></li>
</ul>
</div>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/CertificateValidation.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Typesafe.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.2.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster </a>
      
      |
      <a href="_sources/CertificateValidation.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>